<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal - Doctor Appointment System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #adb5bd;
            --dark-gray: #495057;
            --success-green: #16a34a;
            --warning-orange: #ea580c;
            --danger-red: #dc2626;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: var(--dark);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }

        /* Login Container Styles */
        .login-container {
            display: flex;
            width: 100%;
            min-height: 100vh;
        }

        .login-slideshow {
            flex: 1;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-slide.active {
            opacity: 1;
        }

        .login-slide-content {
            background-color: rgba(0, 0, 0, 0.6);
            padding: 30px;
            border-radius: 10px;
            max-width: 80%;
            text-align: center;
            color: white;
        }

        .login-slide-content h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: white;
        }

        .login-slide-content p {
            font-size: 16px;
            margin-bottom: 0;
        }

        .login-box {
            width: 450px;
            background: white;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        /* Sidebar Styles */
        .sidebar {
            width: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            transition: all 0.3s ease;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar.expanded {
            width: 250px;
        }

        .sidebar-header {
            padding: 20px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h3 {
            display: none;
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }

        .sidebar.expanded .sidebar-header h3 {
            display: block;
        }

        .toggle-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }

        .sidebar-menu {
            padding: 15px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .menu-item:hover, .menu-item.active {
            background-color: rgba(255, 255, 255, 0.1);
            border-left: 3px solid white;
        }

        .menu-item i {
            font-size: 20px;
            margin-right: 15px;
        }

        .menu-item span {
            display: none;
        }

        .sidebar.expanded .menu-item span {
            display: inline;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 80px;
            transition: all 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 250px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Login Page Styles */
        .login-box h2 {
            color: var(--dark);
            margin-bottom: 25px;
            font-weight: 600;
            font-size: 28px;
            text-align: center;
        }

        .alert {
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .alert i {
            margin-right: 10px;
            font-size: 18px;
        }

        .alert-danger {
            background-color: #fff0f3;
            color: var(--danger);
            border-left: 4px solid var(--danger);
        }

        .alert-success {
            background-color: #f0fdf4;
            color: var(--success-green);
            border-left: 4px solid var(--success-green);
        }

        .alert-warning {
            background-color: #fffbeb;
            color: var(--warning-orange);
            border-left: 4px solid var(--warning-orange);
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
            background-color: #f8fafc;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            background-color: white;
        }

        .btn {
            display: inline-block;
            padding: 12px 25px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.25);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-success {
            background-color: var(--success-green);
        }

        .btn-success:hover {
            background-color: #15803d;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #db2777;
        }

        .btn-warning {
            background-color: var(--warning);
        }

        .btn-warning:hover {
            background-color: var(--warning-orange);
        }

        /* Dashboard Styles */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid #e2e8f0;
        }

        .header h2 {
            color: var(--dark);
            font-weight: 600;
            font-size: 24px;
            display: flex;
            align-items: center;
        }

        .header h2 i {
            margin-right: 10px;
            color: var(--primary);
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            border: 1px solid #e2e8f0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
        }

        .card h3 i {
            margin-right: 10px;
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .data-table th,
        .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table th {
            background-color: var(--primary);
            color: white;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .data-table tr:nth-child(even) {
            background-color: #f8fafc;
        }

        .data-table tr:hover {
            background-color: #f1f5f9;
        }

        .action-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            margin-right: 15px;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            transition: all 0.2s ease;
        }

        .action-link:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }

        .action-link i {
            margin-right: 5px;
            font-size: 14px;
        }

        .action-link.danger {
            color: var(--danger);
        }

        .action-link.danger:hover {
            color: #db2777;
        }

        .action-link.warning {
            color: var(--warning);
        }

        .action-link.warning:hover {
            color: var(--warning-orange);
        }

        /* Form Sections */
        .form-section {
            margin-bottom: 30px;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }

        .form-col {
            flex: 1;
            padding: 0 10px;
            margin-bottom: 15px;
            min-width: 250px;
        }

        /* Profile Picture Preview */
        .profile-picture-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        .profile-picture-preview {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary);
            margin-bottom: 10px;
            background-color: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .profile-picture-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-picture-placeholder {
            font-size: 50px;
            color: var(--gray);
        }

        /* Password Strength Meter */
        .password-strength {
            margin-top: 5px;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .text-danger {
            color: var(--danger-red);
        }

        .text-warning {
            color: var(--warning-orange);
        }

        .text-success {
            color: var(--success-green);
        }

        /* Documents Section */
        .documents-container {
            margin-top: 20px;
        }

        .document-list {
            list-style: none;
            margin-top: 10px;
        }

        .document-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background-color: #f8fafc;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.2s ease;
        }

        .document-item:hover {
            background-color: #f1f5f9;
        }

        .document-info {
            display: flex;
            align-items: center;
        }

        .document-icon {
            margin-right: 10px;
            color: var(--primary);
            font-size: 18px;
        }

        .document-actions a {
            margin-left: 10px;
        }

        /* File Upload Styling */
        .file-upload-wrapper {
            position: relative;
            margin-bottom: 15px;
        }

        .file-upload-label {
            display: block;
            padding: 12px 15px;
            background-color: #f8fafc;
            border: 2px dashed #e2e8f0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-label:hover {
            border-color: var(--primary);
            background-color: #f0f4ff;
        }

        .file-upload-label i {
            margin-right: 8px;
            color: var(--primary);
        }

        .file-upload-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-filename {
            margin-top: 5px;
            font-size: 13px;
            color: var(--dark-gray);
            display: block;
        }

        /* Section Divider */
        .section-divider {
            border: none;
            height: 1px;
            background-color: #e2e8f0;
            margin: 30px 0;
        }

        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            text-align: center;
            border: 1px solid #e2e8f0;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .dashboard-card i {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .dashboard-card h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .dashboard-card p {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary);
            margin: 0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .login-slideshow {
                display: none;
            }
            
            .login-box {
                width: 100%;
                max-width: 100%;
                padding: 30px;
            }
        }

        @media (max-width: 768px) {
            .form-col {
                min-width: 100%;
            }

            .data-table {
                display: block;
                overflow-x: auto;
            }

            .login-box {
                padding: 30px 20px;
                margin: 0 15px;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .header h2 {
                margin-bottom: 15px;
            }

            .sidebar {
                width: 60px;
            }

            .sidebar.expanded {
                width: 100%;
                z-index: 1000;
            }

            .main-content {
                margin-left: 60px;
            }

            .main-content.expanded {
                margin-left: 0;
            }
        }

        /* Animation Classes */
        .animate-fade-in {
            animation: fadeIn 0.5s ease;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-slideshow">
            <!-- Slide 1 -->
            <div class="login-slide active" style="background-image: url('https://images.unsplash.com/photo-1579684385127-1ef15d508118?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');">
                <div class="login-slide-content">
                    <h3>Advanced Medical Care</h3>
                    <p>Our hospital provides state-of-the-art medical facilities and expert care for all patients.</p>
                </div>
            </div>
            
            <!-- Slide 2 -->
            <div class="login-slide" style="background-image: url('https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');">
                <div class="login-slide-content">
                    <h3>Expert Doctors</h3>
                    <p>Our team of specialists are dedicated to providing the highest quality healthcare services.</p>
                </div>
            </div>
            
            <!-- Slide 3 -->
            <div class="login-slide" style="background-image: url('https://images.unsplash.com/photo-1581056771107-24ca5f033842?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');">
                <div class="login-slide-content">
                    <h3>24/7 Emergency Services</h3>
                    <p>We're always available to handle medical emergencies with our round-the-clock services.</p>
                </div>
            </div>
            
            <!-- Slide 4 -->
            <div class="login-slide" style="background-image: url('https://images.unsplash.com/photo-1530026186672-2cd00ffc50fe?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');">
                <div class="login-slide-content">
                    <h3>Modern Facilities</h3>
                    <p>Our hospital is equipped with the latest medical technology for accurate diagnosis and treatment.</p>
                </div>
            </div>
            
            <!-- Slide 5 -->
            <div class="login-slide" style="background-image: url('https://images.unsplash.com/photo-1504439468489-c8920d796a29?ixlib=rb-1.2.1&auto=format&fit=crop&w=1351&q=80');">
                <div class="login-slide-content">
                    <h3>Patient-Centered Care</h3>
                    <p>We prioritize patient comfort and well-being in all our healthcare services.</p>
                </div>
            </div>
        </div>
        
        <div class="login-box">
            <h2><i class="fas fa-lock"></i> Admin Login</h2>
            <div id="loginError" class="alert alert-danger" style="display: none;">
                <i class="fas fa-exclamation-circle"></i> <span id="errorMessage"></span>
            </div>
            <div class="card">
                <a href="index.php" class="home-button">
                    <span class="icon">🏠</span>
                    <span class="text">Home</span>
                </a>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username"><i class="fas fa-user"></i> Username</label>
                    <input type="text" id="username" name="username" class="form-control" placeholder="Enter admin username" required>
                </div>
                <div class="form-group">
                    <label for="password"><i class="fas fa-key"></i> Password</label>
                    <input type="password" id="password" name="password" class="form-control" placeholder="Enter admin password" required>
                </div>
                <button type="submit" class="btn btn-block">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </form>
        </div>
    </div>

    <!-- Admin Panel (Hidden by default) -->
    <div id="adminPanel" style="display: none;">
        <!-- Sidebar Navigation -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>Admin Panel</h3>
                <button class="toggle-btn" id="toggleSidebar">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <div class="sidebar-menu">
                <a href="#" class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="menu-item" data-section="services">
                    <i class="fas fa-procedures"></i>
                    <span>Manage Services</span>
                </a>
                <a href="#" class="menu-item" data-section="doctors">
                    <i class="fas fa-user-md"></i>
                    <span>Manage Doctors</span>
                </a>
                <a href="#" class="menu-item" data-section="register_doctor">
                    <i class="fas fa-user-plus"></i>
                    <span>Register Doctor</span>
                </a>
                <a href="#" class="menu-item" data-section="appointments">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                </a>
                <a href="#" class="menu-item" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content" id="mainContent">
            <div class="container">
                <div id="gdWarning" class="alert alert-warning animate-fade-in" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i> 
                    GD library is not enabled. Profile pictures will not be resized for optimal display.
                </div>

                <!-- Success/Error Messages -->
                <div id="successMessage" class="alert alert-success animate-fade-in" style="display: none;">
                    <i class="fas fa-check-circle"></i> <span id="successText"></span>
                </div>
                <div id="errorMessage" class="alert alert-danger animate-fade-in" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i> <span id="errorText"></span>
                </div>

                <!-- Dashboard Section -->
                <div id="dashboardSection" class="section-content">
                    <div class="header">
                        <h2><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h2>
                    </div>

                    <div class="dashboard-cards">
                        <div class="dashboard-card">
                            <i class="fas fa-user-md"></i>
                            <h3>Total Doctors</h3>
                            <p id="doctorCount">0</p>
                        </div>
                        <div class="dashboard-card">
                            <i class="fas fa-procedures"></i>
                            <h3>Total Services</h3>
                            <p id="serviceCount">0</p>
                        </div>
                        <div class="dashboard-card">
                            <i class="fas fa-calendar-check"></i>
                            <h3>Today's Appointments</h3>
                            <p id="appointmentCount">0</p>
                        </div>
                        <div class="dashboard-card">
                            <i class="fas fa-users"></i>
                            <h3>Total Patients</h3>
                            <p id="patientCount">0</p>
                        </div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-calendar-alt"></i> Recent Appointments</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Patient</th>
                                    <th>Doctor</th>
                                    <th>Service</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="recentAppointments">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Manage Services Section -->
                <div id="servicesSection" class="section-content" style="display: none;">
                    <div class="header">
                        <h2><i class="fas fa-procedures"></i> Manage Services</h2>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-plus-circle"></i> Add New Service</h3>
                        <form id="addServiceForm" class="form-section">
                            <div class="form-row">
                                <div class="form-col">
                                    <input type="text" name="service_name" class="form-control" placeholder="Service Name" required>
                                </div>
                                <div class="form-col">
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-plus-circle"></i> Add Service
                                    </button>
                                </div>
                            </div>
                        </form>

                        <h3><i class="fas fa-list"></i> Service List</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Service Name</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="servicesList">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Manage Doctors Section -->
                <div id="doctorsSection" class="section-content" style="display: none;">
                    <div class="header">
                        <h2><i class="fas fa-user-md"></i> Manage Doctors</h2>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-list"></i> Registered Doctors</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Specialty</th>
                                    <th>Service Type</th>
                                    <th>Assigned Services</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="doctorsList">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Register/Edit Doctor Section -->
                <div id="registerDoctorSection" class="section-content" style="display: none;">
                    <div class="header">
                        <h2><i class="fas fa-user-md"></i> <span id="doctorFormTitle">Register New Doctor</span></h2>
                    </div>

                    <div class="card">
                        <form id="doctorForm" class="form-section" enctype="multipart/form-data">
                            <input type="hidden" name="doctor_id" id="doctorId" value="">

                            <div class="profile-picture-container">
                                <div class="profile-picture-preview">
                                    <div class="profile-picture-placeholder">
                                        <i class="fas fa-user-md"></i>
                                    </div>
                                </div>
                                <div class="file-upload-wrapper">
                                    <label for="profile_picture" class="file-upload-label">
                                        <i class="fas fa-camera"></i> Upload Profile Picture
                                    </label>
                                    <input type="file" id="profile_picture" name="profile_picture" class="file-upload-input" 
                                           accept="image/*" onchange="previewProfilePicture(this)">
                                    <span class="file-upload-filename" id="profile-filename"></span>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label><i class="fas fa-user"></i> Full Name</label>
                                    <input type="text" name="doctor_name" id="doctorName" class="form-control"
                                           placeholder="Doctor's Full Name" required>
                                </div>
                                <div class="form-col">
                                    <label><i class="fas fa-envelope"></i> Email</label>
                                    <input type="email" name="doctor_email" id="doctorEmail" class="form-control"
                                           placeholder="Doctor Email" required>
                                </div>
                            </div>

                            <div id="passwordFields">
                                <div class="form-row">
                                    <div class="form-col">
                                        <label><i class="fas fa-key"></i> Password</label>
                                        <input type="password" name="doctor_password" id="doctor_password" class="form-control"
                                               placeholder="Set Doctor Password" required onkeyup="checkPasswordStrength(this.value)">
                                        <div id="password-strength" class="password-strength"></div>
                                    </div>
                                    <div class="form-col">
                                        <label><i class="fas fa-key"></i> Confirm Password</label>
                                        <input type="password" name="confirm_password" id="confirmPassword" class="form-control"
                                               placeholder="Confirm Password" required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label><i class="fas fa-star"></i> Specialty</label>
                                    <input type="text" name="specialty" id="specialty" class="form-control"
                                           placeholder="Doctor Specialty" required>
                                </div>
                                <div class="form-col">
                                    <label><i class="fas fa-tag"></i> Service Type</label>
                                    <select name="service_type" id="serviceType" class="form-control" required>
                                        <option value="">-- Select Service Type --</option>
                                        <option value="Inpatient">Inpatient</option>
                                        <option value="Outpatient">Outpatient</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label><i class="fas fa-procedures"></i> Assign to Services</label>
                                    <select name="assigned_services[]" id="assignedServices" class="form-control" multiple required style="min-height: 100px;">
                                        <option value="">-- Select Services --</option>
                                        <!-- Will be populated by JavaScript -->
                                    </select>
                                    <small style="color: #666; display: block; margin-top: 5px;">Hold Ctrl (Windows) / Cmd (Mac) to select multiple services.</small>
                                </div>
                            </div>

                            <div class="documents-container">
                                <label><i class="fas fa-file-alt"></i> Doctor Documents</label>
                                <div id="documentsList">
                                    <p style="color: var(--gray);">No documents uploaded yet.</p>
                                </div>

                                <div class="file-upload-wrapper" style="margin-top: 15px;">
                                    <label for="documents" class="file-upload-label">
                                        <i class="fas fa-upload"></i> Upload Additional Documents
                                    </label>
                                    <input type="file" id="documents" name="documents[]" class="file-upload-input" multiple
                                           accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png">
                                    <small style="color: #666; display: block; margin-top: 5px;">PDF, DOC, DOCX, TXT, JPG, JPEG, PNG (Max 10MB each)</small>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <button type="submit" id="submitDoctorBtn" class="btn btn-success">
                                        <i class="fas fa-user-plus"></i> Register Doctor
                                    </button>
                                    <a href="#" id="cancelEditBtn" class="btn btn-danger" style="display: none;">
                                        <i class="fas fa-times"></i> Cancel
                                    </a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Appointments Section -->
                <div id="appointmentsSection" class="section-content" style="display: none;">
                    <div class="header">
                        <h2><i class="fas fa-calendar-check"></i> Manage Appointments</h2>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-list"></i> All Appointments</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Patient Name</th>
                                    <th>Doctor Name</th>
                                    <th>Service</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="appointmentsList">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data - in a real app, this would come from an API
        const sampleData = {
            doctors: [
                {
                    id: 1,
                    name: "Dr. John Smith",
                    email: "john.smith@example.com",
                    specialty: "Cardiology",
                    service_type: "Inpatient",
                    profile_picture: "",
                    assigned_services: [1, 2]
                },
                {
                    id: 2,
                    name: "Dr. Sarah Johnson",
                    email: "sarah.j@example.com",
                    specialty: "Pediatrics",
                    service_type: "Outpatient",
                    profile_picture: "",
                    assigned_services: [3]
                }
            ],
            services: [
                { id: 1, name: "Cardiac Consultation" },
                { id: 2, name: "Echocardiogram" },
                { id: 3, name: "Pediatric Checkup" }
            ],
            appointments: [
                {
                    id: 1,
                    patient_name: "Michael Brown",
                    doctor_name: "Dr. John Smith",
                    service_name: "Cardiac Consultation",
                    appointment_date: "2023-06-15",
                    appointment_time: "10:00:00",
                    status: "Confirmed"
                },
                {
                    id: 2,
                    patient_name: "Emily Davis",
                    doctor_name: "Dr. Sarah Johnson",
                    service_name: "Pediatric Checkup",
                    appointment_date: "2023-06-15",
                    appointment_time: "14:30:00",
                    status: "Confirmed"
                }
            ],
            counts: {
                doctors: 2,
                services: 3,
                appointments: 2,
                patients: 5
            }
        };

        // DOM elements
        const loginPage = document.getElementById('loginPage');
        const adminPanel = document.getElementById('adminPanel');
        const loginForm = document.getElementById('loginForm');
        const loginError = document.getElementById('loginError');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const logoutBtn = document.getElementById('logoutBtn');
        const toggleSidebar = document.getElementById('toggleSidebar');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');
        const sectionLinks = document.querySelectorAll('.menu-item[data-section]');
        const sectionContents = document.querySelectorAll('.section-content');
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in (in a real app, this would check session)
            const isLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            
            if (isLoggedIn) {
                showAdminPanel();
            } else {
                showLoginPage();
            }
            
            // Setup event listeners
            setupEventListeners();
            
            // Initialize login slideshow
            initSlideshow();
            
            // Load sample data
            loadSampleData();
        });
        
        function setupEventListeners() {
            // Login form
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                // Simple validation - in a real app, this would be a server-side check
                if (username === "admin" && password === "admin123") {
                    localStorage.setItem('adminLoggedIn', 'true');
                    showAdminPanel();
                    showSuccessMessage("Login successful");
                } else {
                    showErrorMessage("Invalid admin credentials");
                }
            });
            
            // Logout button
            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                if (confirm('Are you sure you want to logout?')) {
                    localStorage.removeItem('adminLoggedIn');
                    showLoginPage();
                }
            });
            
            // Toggle sidebar
            toggleSidebar.addEventListener('click', function() {
                sidebar.classList.toggle('expanded');
                mainContent.classList.toggle('expanded');
                
                // Save state in localStorage
                const isExpanded = sidebar.classList.contains('expanded');
                localStorage.setItem('sidebarExpanded', isExpanded);
            });
            
            // Section navigation
            sectionLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    
                    // Update active link
                    sectionLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show the selected section
                    showSection(section);
                });
            });
            
            // Add service form
            document.getElementById('addServiceForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                const serviceName = this.service_name.value.trim();
                
                if (serviceName) {
                    // In a real app, this would be an API call
                    const newService = {
                        id: sampleData.services.length + 1,
                        name: serviceName
                    };
                    
                    sampleData.services.push(newService);
                    sampleData.counts.services++;
                    
                    // Update UI
                    loadServices();
                    this.reset();
                    showSuccessMessage("Service added successfully");
                }
            });
            
            // Doctor form
            document.getElementById('doctorForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const isEdit = !!document.getElementById('doctorId').value;
                const password = document.getElementById('doctor_password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                // Validate passwords if this is a new doctor
                if (!isEdit && password !== confirmPassword) {
                    showErrorMessage("Passwords do not match");
                    return;
                }
                
                // In a real app, this would be an API call
                const doctorData = {
                    id: isEdit ? parseInt(document.getElementById('doctorId').value) : sampleData.doctors.length + 1,
                    name: document.getElementById('doctorName').value,
                    email: document.getElementById('doctorEmail').value,
                    specialty: document.getElementById('specialty').value,
                    service_type: document.getElementById('serviceType').value,
                    profile_picture: "",
                    assigned_services: Array.from(document.getElementById('assignedServices').selectedOptions).map(opt => parseInt(opt.value))
                };
                
                if (isEdit) {
                    // Update existing doctor
                    const index = sampleData.doctors.findIndex(d => d.id === doctorData.id);
                    if (index !== -1) {
                        sampleData.doctors[index] = doctorData;
                    }
                    showSuccessMessage("Doctor updated successfully");
                } else {
                    // Add new doctor
                    sampleData.doctors.push(doctorData);
                    sampleData.counts.doctors++;
                    showSuccessMessage("Doctor registered successfully");
                }
                
                // Update UI
                loadDoctors();
                showSection('doctors');
            });
            
            // Cancel edit button
            document.getElementById('cancelEditBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                resetDoctorForm();
                showSection('doctors');
            });
        }
        
        function showLoginPage() {
            loginPage.style.display = 'flex';
            adminPanel.style.display = 'none';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }
        
        function showAdminPanel() {
            loginPage.style.display = 'none';
            adminPanel.style.display = 'block';
            
            // Check saved sidebar state
            const savedState = localStorage.getItem('sidebarExpanded');
            if (savedState === 'true') {
                sidebar.classList.add('expanded');
                mainContent.classList.add('expanded');
            }
            
            // Show dashboard by default
            showSection('dashboard');
        }
        
        function showSection(sectionId) {
            // Hide all sections
            sectionContents.forEach(section => {
                section.style.display = 'none';
            });
            
            // Show the selected section
            document.getElementById(`${sectionId}Section`).style.display = 'block';
            
            // Special handling for certain sections
            if (sectionId === 'register_doctor') {
                resetDoctorForm();
                document.getElementById('doctorFormTitle').textContent = 'Register New Doctor';
                document.getElementById('submitDoctorBtn').innerHTML = '<i class="fas fa-user-plus"></i> Register Doctor';
                document.getElementById('passwordFields').style.display = 'block';
                document.getElementById('cancelEditBtn').style.display = 'none';
            }
        }
        
        function showSuccessMessage(message) {
            successMessage.style.display = 'flex';
            document.getElementById('successText').textContent = message;
            
            // Hide after 5 seconds
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 5000);
        }
        
        function showErrorMessage(message) {
            errorMessage.style.display = 'flex';
            document.getElementById('errorText').textContent = message;
            
            // Hide after 5 seconds
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 5000);
        }
        
        function initSlideshow() {
            const slides = document.querySelectorAll('.login-slide');
            let currentSlide = 0;
            
            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
            }
            
            function nextSlide() {
                currentSlide = (currentSlide + 1) % slides.length;
                showSlide(currentSlide);
            }
            
            // Change slide every 5 seconds
            setInterval(nextSlide, 5000);
        }
        
        function loadSampleData() {
            // Update counts
            document.getElementById('doctorCount').textContent = sampleData.counts.doctors;
            document.getElementById('serviceCount').textContent = sampleData.counts.services;
            document.getElementById('appointmentCount').textContent = sampleData.appointments.filter(a => a.appointment_date === new Date().toISOString().split('T')[0]).length;
            document.getElementById('patientCount').textContent = sampleData.counts.patients;
            
            // Load recent appointments
            const recentAppointments = document.getElementById('recentAppointments');
            recentAppointments.innerHTML = sampleData.appointments
                .slice(0, 5)
                .map(appointment => `
                    <tr>
                        <td>${appointment.id}</td>
                        <td>${appointment.patient_name}</td>
                        <td>${appointment.doctor_name}</td>
                        <td>${appointment.service_name}</td>
                        <td>${appointment.appointment_date}</td>
                        <td>${formatTime(appointment.appointment_time)}</td>
                        <td>${appointment.status}</td>
                    </tr>
                `)
                .join('');
            
            // Load services
            loadServices();
            
            // Load doctors
            loadDoctors();
            
            // Load appointments
            loadAppointments();
            
            // Load services for doctor form
            loadServicesForDoctorForm();
        }
        
        function loadServices() {
            const servicesList = document.getElementById('servicesList');
            servicesList.innerHTML = sampleData.services
                .map(service => `
                    <tr>
                        <td>${service.id}</td>
                        <td>${service.name}</td>
                        <td>
                            <a href="#" onclick="deleteService(${service.id})" class="action-link danger">
                                <i class="fas fa-trash-alt"></i> Delete
                            </a>
                        </td>
                    </tr>
                `)
                .join('');
        }
        
        function loadDoctors() {
            const doctorsList = document.getElementById('doctorsList');
            doctorsList.innerHTML = sampleData.doctors
                .map(doctor => {
                    const assignedServices = sampleData.services
                        .filter(s => doctor.assigned_services.includes(s.id))
                        .map(s => s.name)
                        .join(', ');
                    
                    return `
                        <tr>
                            <td>${doctor.id}</td>
                            <td>
                                <div style="display: flex; align-items: center;">
                                    ${doctor.profile_picture ? 
                                        `<img src="uploads/profile_pictures/${doctor.profile_picture}" alt="Profile" style="width: 40px; height: 40px; border-radius: 50%; margin-right: 10px; object-fit: cover;">` :
                                        `<div style="width: 40px; height: 40px; border-radius: 50%; background-color: #f1f5f9; display: flex; align-items: center; justify-content: center; margin-right: 10px;">
                                            <i class="fas fa-user-md" style="color: var(--gray);"></i>
                                        </div>`
                                    }
                                    ${doctor.name}
                                </div>
                            </td>
                            <td>${doctor.email}</td>
                            <td>${doctor.specialty}</td>
                            <td>${doctor.service_type}</td>
                            <td>${assignedServices || 'N/A'}</td>
                            <td>
                                <a href="#" onclick="editDoctor(${doctor.id})" class="action-link warning">
                                    <i class="fas fa-edit"></i> Edit
                                </a>
                                <a href="#" onclick="deleteDoctor(${doctor.id})" class="action-link danger">
                                    <i class="fas fa-trash-alt"></i> Delete
                                </a>
                            </td>
                        </tr>
                    `;
                })
                .join('');
        }
        
        function loadAppointments() {
            const appointmentsList = document.getElementById('appointmentsList');
            appointmentsList.innerHTML = sampleData.appointments
                .map(appointment => `
                    <tr>
                        <td>${appointment.id}</td>
                        <td>${appointment.patient_name}</td>
                        <td>${appointment.doctor_name}</td>
                        <td>${appointment.service_name}</td>
                        <td>${appointment.appointment_date}</td>
                        <td>${formatTime(appointment.appointment_time)}</td>
                        <td>${appointment.status}</td>
                        <td>
                            <a href="#" onclick="deleteAppointment(${appointment.id})" class="action-link danger">
                                <i class="fas fa-trash-alt"></i> Delete
                            </a>
                        </td>
                    </tr>
                `)
                .join('');
        }
        
        function loadServicesForDoctorForm() {
            const assignedServicesSelect = document.getElementById('assignedServices');
            assignedServicesSelect.innerHTML = '<option value="">-- Select Services --</option>' + 
                sampleData.services.map(service => 
                    `<option value="${service.id}">${service.name}</option>`
                ).join('');
        }
        
        function editDoctor(doctorId) {
            const doctor = sampleData.doctors.find(d => d.id === doctorId);
            if (!doctor) return;
            
            // Populate form
            document.getElementById('doctorId').value = doctor.id;
            document.getElementById('doctorName').value = doctor.name;
            document.getElementById('doctorEmail').value = doctor.email;
            document.getElementById('specialty').value = doctor.specialty;
            document.getElementById('serviceType').value = doctor.service_type;
            
            // Select assigned services
            const assignedServicesSelect = document.getElementById('assignedServices');
            Array.from(assignedServicesSelect.options).forEach(option => {
                option.selected = doctor.assigned_services.includes(parseInt(option.value));
            });
            
            // Update UI
            document.getElementById('doctorFormTitle').textContent = 'Edit Doctor';
            document.getElementById('submitDoctorBtn').innerHTML = '<i class="fas fa-save"></i> Update Doctor';
            document.getElementById('passwordFields').style.display = 'none';
            document.getElementById('cancelEditBtn').style.display = 'inline-block';
            
            // Show the form
            showSection('register_doctor');
        }
        
        function resetDoctorForm() {
            document.getElementById('doctorForm').reset();
            document.getElementById('doctorId').value = '';
            document.getElementById('profile-filename').textContent = '';
            document.querySelector('.profile-picture-preview').innerHTML = `
                <div class="profile-picture-placeholder">
                    <i class="fas fa-user-md"></i>
                </div>
            `;
        }
        
        function deleteService(serviceId) {
            if (confirm('Are you sure you want to delete this service? This will also remove all doctor associations for this service.')) {
                // In a real app, this would be an API call
                sampleData.services = sampleData.services.filter(s => s.id !== serviceId);
                sampleData.counts.services--;
                
                // Remove from doctors' assigned services
                sampleData.doctors.forEach(doctor => {
                    doctor.assigned_services = doctor.assigned_services.filter(id => id !== serviceId);
                });
                
                // Update UI
                loadServices();
                loadDoctors();
                loadServicesForDoctorForm();
                showSuccessMessage("Service deleted successfully");
            }
        }
        
        function deleteDoctor(doctorId) {
            if (confirm('Are you sure you want to delete this doctor? This will also remove their service assignments and prevent new appointments with them.')) {
                // In a real app, this would be an API call
                sampleData.doctors = sampleData.doctors.filter(d => d.id !== doctorId);
                sampleData.counts.doctors--;
                
                // Update UI
                loadDoctors();
                showSuccessMessage("Doctor deleted successfully");
            }
        }
        
        function deleteAppointment(appointmentId) {
            if (confirm('Are you sure you want to delete this appointment?')) {
                // In a real app, this would be an API call
                sampleData.appointments = sampleData.appointments.filter(a => a.id !== appointmentId);
                
                // Update UI
                loadAppointments();
                showSuccessMessage("Appointment deleted successfully");
            }
        }
        
        function formatTime(timeString) {
            const [hours, minutes] = timeString.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const hour12 = hour % 12 || 12;
            return `${hour12}:${minutes} ${ampm}`;
        }
        
        // Password strength checker
        function checkPasswordStrength(password) {
            const strengthElement = document.getElementById('password-strength');
            
            if (password.length === 0) {
                strengthElement.textContent = '';
                return;
            }
            
            let strength = 0;
            let feedback = '';
            
            // Check length
            if (password.length < 8) {
                feedback = "Password is too short (minimum 8 characters)";
                strengthElement.textContent = feedback;
                strengthElement.className = 'password-strength text-danger';
                return;
            } else {
                strength += 1;
            }
            
            // Check for mixed case
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) {
                strength += 1;
            } else {
                feedback = "Add both uppercase and lowercase letters";
            }
            
            // Check for numbers
            if (/\d/.test(password)) {
                strength += 1;
            } else {
                feedback = feedback ? feedback + ", include numbers" : "Include numbers";
            }
            
            // Check for special chars
            if (/[^a-zA-Z0-9]/.test(password)) {
                strength += 1;
            } else {
                feedback = feedback ? feedback + ", add special characters" : "Add special characters";
            }
            
            // Determine strength level
            if (strength <= 2) {
                strengthElement.textContent = "Weak: " + feedback;
                strengthElement.className = 'password-strength text-danger';
            } else if (strength == 3) {
                strengthElement.textContent = "Moderate: Good, but could be stronger";
                strengthElement.className = 'password-strength text-warning';
            } else {
                strengthElement.textContent = "Strong: Strong password!";
                strengthElement.className = 'password-strength text-success';
            }
        }
        
        // Profile picture preview
        function previewProfilePicture(input) {
            const previewContainer = document.querySelector('.profile-picture-preview');
            const filenameDisplay = document.getElementById('profile-filename');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewContainer.innerHTML = '';
                    const img = document.createElement('img');
                    img.id = 'profile-preview';
                    img.src = e.target.result;
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    previewContainer.appendChild(img);
                }
                
                reader.readAsDataURL(input.files[0]);
                filenameDisplay.textContent = input.files[0].name;
            }
        }
    </script>
</body>
</html>